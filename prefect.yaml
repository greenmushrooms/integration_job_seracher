name: integration-job-searcher
prefect-version: "3.0.0"
build: null
push: null

pull: []

deployments:
  - name: job-search-deployment
    version: "1.0.1"
    tags: ["jobs", "etl"]
    description: "Job search and processing flow"
    entrypoint: main.py:get_jobs
    parameters:
      title: "data engineer"
      location: "Toronto, ON"
      profile: "Slava"
      searches: 10
    schedule:
      cron: "0 7 * * *"
      timezone: "America/Toronto"
    work_pool:
      name: dev-pool-docker
      work_queue_name: default
      job_variables:
        image: "integration-job-searcher:latest"
        image_pull_policy: "Never"
        networks: ["project-hub-network"]

        env:
          DB_HOST: "{{ prefect.blocks.secret.job-searcher--database-host }}"
          DB_PORT: "{{ prefect.blocks.secret.job-searcher--database-port }}"
          DB_USER: "{{ prefect.blocks.secret.job-searcher--database-user }}"
          DB_PASSWORD: "{{ prefect.blocks.secret.job-searcher--database-password }}"
          DB_NAME: "{{ prefect.blocks.secret.job-searcher--database-name }}"
          ANTHROPIC_API_KEY: "{{ prefect.blocks.secret.job-searcher--anthropic-api-key }}"
          TELEGRAM_BOT_TOKEN: "{{ prefect.blocks.secret.job-searcher--telegram-bot-token }}"
          TELEGRAM_CHAT_ID: "{{ prefect.blocks.secret.job-searcher--telegram-chat-id }}"
