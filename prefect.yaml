name: job-search-project
prefect-version: 3.0.0
build: null
push: null
pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/greenmushrooms/integration_job_seracher.git
      branch: main
  - prefect.deployments.steps.set_working_directory:
      directory: "{{ clone-step.directory }}"
  - prefect.deployments.steps.run_shell_script:
      script: |
        echo "Current directory: $(pwd)"
        echo "Directory contents:"
        ls -la
        echo "Looking for pyproject.toml..."
        find . -name "pyproject.toml"
        cd "{{ clone-step.directory }}"
        echo "After cd, current directory: $(pwd)"
        ls -la
        uv sync
deployments:
  - name: job-search-deployment
    version: 1.0.0
    tags: ["jobs", "etl"]
    description: Job search and processing flow
    entrypoint: main.py:get_jobs
    parameters:
      title: "data engineer"
      location: "Toronto, ON"
      profile: "Slava"
      searches: 60
    schedule:
      cron: "0 7 * * *"
      timezone: "America/Toronto"
    work_pool:
      name: dev-pool
      work_queue_name: default
